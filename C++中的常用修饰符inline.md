---
title: C++中的常用修饰符inline
date: 2012-11-14 15:16:33
tags: CSDN迁移
---
   现在再来谈一下**inline**这个关键字，inline也是C++程序设计语言中的常用的**修饰符**之一，之所以把这个问题放在这个位置，是因为inline这个关键字的引入原因和const十分相似，下面分为如下几个部分进行阐述。 c++中引入**inline关键字**的原因：

 inline关键字用来定义一个类的内联函数，引入它的主要原因是用它替代c中表达式形式的宏定义。

 表达式形式的宏定义一例：

 [![](http://pic.it.8844.com/filespic/100909/1110/x_8ca4077475.jpg)](http://pic.it.8844.com/filespic/100909/1110/x_8ca4077475.jpg)

 为什么要取代这种形式呢，且听我道来：

 1.首先谈一下在c中使用这种形式宏定义的原因，c语言是一个效率很高的语言，这种宏定义在形式及使用上像一个函数，但它使用预处理器实现，没有了参数压栈，代码生成等一系列的操作，因此，效率很高，这是它在c中被使用的一个主要原因。

 2.这种宏定义在形式上类似于一个函数，但在使用它时，仅仅只是做预处理器符号表中的简单替换，因此它不能进行参数有效性的检测，也就不能享受c++编译器严格类型检查的好处，另外它的返回值也不能被强制转换为可转换的合适的类型，这样，它的使用就存在着一系列的隐患和局限性。

 3.在c++中引入了类及类的访问控制，这样，如果一个操作或者说一个表达式涉及到类的保护成员或私有成员，你就不可能使用这种宏定义来实现(因为无法将this指针放在合适的位置)。

 4.inline推出的目的，也正是为了取代这种表达式形式的宏定义，它消除了它的缺点，同时又很好地继承了它的优点。

 为什么inline能很好地取代表达式形式的预定义呢？

 对应于上面的1-3点，阐述如下：

 1.inline定义的类的内联函数，函数的代码被放入符号表中，在使用时直接进行替换，(像宏一样展开)，没有了调用的开销，效率也很高。

 2.很明显，类的内联函数也是一个真正的函数，编译器在调用一个内联函数时，会首先检查它的参数的类型，保证调用正确。然后进行一系列的相关检查，就像对待任何一个真正的函数一样。这样就消除了它的隐患和局限性。

 3.inline可以作为某个类的成员函数，当然就可以在其中使用所在类的保护成员及私有成员。

 在何时使用inline函数：

 首先，你可以使用inline函数完全取代表达式形式的宏定义。

 另外要注意，内联函数一般只会用在函数内容非常简单的时候，这是因为，内联函数的代码会在任何调用它的地方展开，如果函数太复杂，代码膨胀带来的恶果很可能会大于效率的提高带来的益处。内联函数最重要的使用地方是用于类的存取函数。

 如何使用类的inline函数：

 简单提一下inline的使用吧：

 1.在类中定义这种函数：

 [![](http://pic.it.8844.com/filespic/100909/1110/x_1234077479.jpg)](http://pic.it.8844.com/filespic/100909/1110/x_1234077479.jpg)

 2.在类中声明，在类外定义：

 [![](http://pic.it.8844.com/filespic/100909/1110/x_1234077427.jpg)](http://pic.it.8844.com/filespic/100909/1110/x_1234077427.jpg)

 在本文中，谈了一种特殊的函数，类的inline函数，它的源起和特点在某种说法上与const很类似，可以与const搭配起来看。另外，最近有许多朋友与我mail交往，给我谈论了许多问题，给了我很多启发，在此表示感谢。

   
 